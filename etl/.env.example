# ========================================
# ETL Service Configuration
# ========================================

# Airflow Configuration
AIRFLOW__CORE__EXECUTOR=CeleryExecutor
AIRFLOW__CORE__LOAD_EXAMPLES=False
AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=True
AIRFLOW__WEBSERVER__EXPOSE_CONFIG=False
AIRFLOW__WEBSERVER__SECRET_KEY=your-secret-key-here-change-in-production

# Airflow Database (PostgreSQL)
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql+psycopg2://airflow:airflow@postgres:5432/airflow
AIRFLOW__DATABASE__LOAD_DEFAULT_CONNECTIONS=False

# Airflow Celery (for task distribution)
AIRFLOW__CELERY__BROKER_URL=redis://redis:6379/0
AIRFLOW__CELERY__RESULT_BACKEND=db+postgresql://airflow:airflow@postgres:5432/airflow

# Airflow Authentication
AIRFLOW__WEBSERVER__AUTHENTICATE=True
AIRFLOW__AUTH__BACKEND=airflow.api.auth.backend.basic_auth
AIRFLOW_ADMIN_USERNAME=admin
AIRFLOW_ADMIN_PASSWORD=admin
AIRFLOW_ADMIN_EMAIL=admin@cinema.example.com

# ========================================
# Celery Worker Configuration
# ========================================

CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0

# ========================================
# Database Connections
# ========================================

# Catalog Database (PostgreSQL)
CATALOG_DB_HOST=catalog-postgres
CATALOG_DB_PORT=5432
CATALOG_DB_NAME=catalog
CATALOG_DB_USER=catalog
CATALOG_DB_PASSWORD=catalog_password

# Connection string format
CATALOG_DATABASE_URL=postgresql://catalog:catalog_password@catalog-postgres:5432/catalog

# ========================================
# Elasticsearch Configuration
# ========================================

ELASTICSEARCH_HOST=elasticsearch
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_USER=elastic
ELASTICSEARCH_PASSWORD=changeme
ELASTICSEARCH_MOVIES_INDEX=movies

# Connection URL
ELASTICSEARCH_URL=http://elastic:changeme@elasticsearch:9200

# ========================================
# AWS S3 Configuration
# ========================================

AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_REGION=us-east-1
AWS_S3_BUCKET=cinema-videos

# ========================================
# External APIs
# ========================================

# TMDb API
TMDB_API_KEY=your-tmdb-api-key
TMDB_BASE_URL=https://api.themoviedb.org/3

# ========================================
# Redis Configuration
# ========================================

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# ========================================
# Logging
# ========================================

LOG_LEVEL=INFO
AIRFLOW__LOGGING__LOGGING_LEVEL=INFO

# ========================================
# Video Processing
# ========================================

# Transcoding settings
VIDEO_RESOLUTIONS=1080p,720p,480p,360p
VIDEO_OUTPUT_FORMATS=hls,dash
VIDEO_TRANSCODE_PRESET=medium

# Thumbnail settings
THUMBNAIL_TIMESTAMPS=0,300,600,1200,1800
THUMBNAIL_RESOLUTION=1280x720

# ========================================
# Monitoring
# ========================================

# Flower (Celery monitoring)
FLOWER_PORT=5555
FLOWER_BASIC_AUTH=admin:admin
